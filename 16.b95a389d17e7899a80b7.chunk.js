(this.webpackJsonp=this.webpackJsonp||[]).push([[16,26,27],{43:function(t,e,i){"use strict";function n(t,e){return e?t.forEach(t=>t.setAttribute("disabled","true")):t.forEach(t=>t.removeAttribute("disabled")),()=>n(t,!e)}i.d(e,"a",(function(){return n}))},44:function(t,e,i){"use strict";i.r(e);var n=i(2),a=i(17),s=i(8),r=i(31),o=function(t,e,i,n){return new(i||(i=Promise))((function(a,s){function r(t){try{c(n.next(t))}catch(t){s(t)}}function o(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const c=new r.a("page-chats",!1,()=>(a.default.pushToState("authState",{_:"authStateSignedIn"}),Promise.resolve().then(i.bind(null,10)).then(t=>{t.default.dispatchEvent("im_mount")}),s.default.requestedServerLanguage||s.default.getCacheLangPack().then(t=>{t.local&&s.default.getLangPack(t.lang_code)}),Object(n.a)(),new Promise(t=>{window.requestAnimationFrame(()=>{Promise.all([i.e(1),i.e(3),i.e(5),i.e(6),i.e(17)]).then(i.bind(null,83)).finally(()=>o(void 0,void 0,void 0,(function*(){t()})))})})));e.default=c},58:function(t,e,i){"use strict";var n=i(9),a=i(25),s=i(14);const r=new class{getState(){return s.a.invokeApi("account.getPassword").then(t=>t)}updateSettings(t={}){return this.getState().then(e=>{let i,n;const a={password:null,new_settings:{_:"account.passwordInputSettings",hint:t.hint,email:t.email}};i=t.currentPassword?s.a.computeSRP(t.currentPassword,e):Promise.resolve({_:"inputCheckPasswordEmpty"});const r=e.new_algo,o=new Uint8Array(r.salt1.length+32);return o.randomize(),o.set(r.salt1,0),r.salt1=o,n=t.newPassword?s.a.computeSRP(t.newPassword,e,!0):Promise.resolve(new Uint8Array),Promise.all([i,n]).then(t=>(a.password=t[0],a.new_settings.new_algo=r,a.new_settings.new_password_hash=t[1],s.a.invokeApi("account.updatePasswordSettings",a)))})}check(t,e,i={}){return s.a.computeSRP(t,e).then(t=>s.a.invokeApi("auth.checkPassword",{password:t},i).then(t=>("auth.authorization"===t._&&(a.a.saveApiUser(t.user),s.a.setUserAuth(t.user.id)),t)))}confirmPasswordEmail(t){return s.a.invokeApi("account.confirmPasswordEmail",{code:t})}resendPasswordEmail(){return s.a.invokeApi("account.resendPasswordEmail")}cancelPasswordEmail(){return s.a.invokeApi("account.cancelPasswordEmail")}};n.a.passwordManager=r,e.a=r},63:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(8);class a{constructor(t){this.element=document.body.querySelector("."+t.className),this.container=document.createElement("div"),this.container.className="container center-align",this.imageDiv=document.createElement("div"),this.imageDiv.className="auth-image",this.title=document.createElement("h4"),t.titleLangKey&&this.title.append(Object(n.i18n)(t.titleLangKey)),this.subtitle=document.createElement("p"),this.subtitle.className="subtitle",t.subtitleLangKey&&this.subtitle.append(Object(n.i18n)(t.subtitleLangKey)),this.container.append(this.imageDiv,this.title,this.subtitle),t.withInputWrapper&&(this.inputWrapper=document.createElement("div"),this.inputWrapper.className="input-wrapper",this.container.append(this.inputWrapper)),this.element.append(this.container)}}},73:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(11),a=i(27);class s extends a.b{constructor(t={}){super(Object.assign({plainText:!0},t)),this.passwordVisible=!1,this.onVisibilityClick=t=>{Object(n.a)(t),this.passwordVisible=!this.passwordVisible,this.toggleVisible.classList.toggle("eye-hidden",this.passwordVisible),this.input.type=this.passwordVisible?"text":"password",this.onVisibilityClickAdditional&&this.onVisibilityClickAdditional()};const e=this.input;e.type="password",e.setAttribute("required",""),e.autocomplete="off";const i=document.createElement("input");i.classList.add("stealthy"),i.tabIndex=-1,i.type="password",e.parentElement.prepend(i),e.parentElement.insertBefore(i.cloneNode(),e.nextSibling);const a=this.toggleVisible=document.createElement("span");a.classList.add("toggle-visible","tgico"),this.container.classList.add("input-field-password"),this.container.append(a),a.addEventListener("click",this.onVisibilityClick),a.addEventListener("touchend",this.onVisibilityClick)}}},76:function(t,e,i){"use strict";i.r(e);var n=i(20),a=i(21),s=i(17),r=i(58),o=i(31),c=i(44),l=i(16),d=i(73),u=i(79),h=i(15),p=i(8),m=i(63),w=i(11),b=i(12),g=i(89),v=i(24),f=i(43);let y;const P=new o.a("page-password",!0,()=>{const t=new m.a({className:"page-password",withInputWrapper:!0,titleLangKey:"Login.Password.Title",subtitleLangKey:"Login.Password.Subtitle"}),e=Object(l.a)("btn-primary btn-color-primary"),i=new p.default.IntlElement({key:"Login.Next"});e.append(i.element);const s=new d.a({label:"LoginPassword",name:"password"});let o;y=s.input,t.inputWrapper.append(s.container,e);let P,k=()=>(o||(o=window.setInterval(k,1e4)),r.a.getState().then(t=>{P=t,P.hint?Object(v.a)(s.label,Object(g.a)(h.b.wrapEmojiText(P.hint))):s.setLabel()}));const L=t=>{if(t&&Object(w.a)(t),!y.value.length)return void y.classList.add("error");const a=Object(f.a)([y,e],!0);let l=y.value;i.update({key:"PleaseWait"});const d=Object(n.f)(e);r.a.check(l,P).then(t=>{switch(t._){case"auth.authorization":clearInterval(o),c.default.mount(),S&&S.remove();break;default:e.removeAttribute("disabled"),i.update({key:t._}),d.remove()}}).catch(t=>{a(),s.input.classList.add("error"),t.type,i.update({key:"PASSWORD_HASH_INVALID"}),y.select(),d.remove(),k()})};Object(b.b)(e,L),y.addEventListener("keypress",(function(t){if(this.classList.remove("error"),i.update({key:"Login.Next"}),"Enter"===t.key)return L()}));const E=a.b.isMobile?100:166,S=new u.a(s,E);return t.imageDiv.append(S.container),Promise.all([S.load(),k()])},null,()=>{y.focus(),s.default.pushToState("authState",{_:"authStatePassword"})});e.default=P},79:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(29);class a{constructor(t,e){this.passwordInputField=t,this.size=e,this.needFrame=0,this.container=document.createElement("div"),this.container.classList.add("media-sticker-wrapper")}load(){return this.loadPromise?this.loadPromise:this.loadPromise=n.b.loadAnimationFromURL({container:this.container,loop:!1,autoplay:!1,width:this.size,height:this.size,noCache:!0},"assets/img/TwoFactorSetupMonkeyPeek.tgs").then(t=>(this.animation=t,this.animation.addEventListener("enterFrame",t=>{(1===this.animation.direction&&t>=this.needFrame||-1===this.animation.direction&&t<=this.needFrame)&&(this.animation.setSpeed(1),this.animation.pause())}),this.passwordInputField.onVisibilityClickAdditional=()=>{this.passwordInputField.passwordVisible?(this.animation.setDirection(1),this.animation.curFrame=0,this.needFrame=16,this.animation.play()):(this.animation.setDirection(-1),this.animation.curFrame=16,this.needFrame=0,this.animation.play())},n.b.waitForFirstFrame(t)))}remove(){this.animation&&this.animation.remove()}}}}]);
//# sourceMappingURL=16.b95a389d17e7899a80b7.chunk.js.map