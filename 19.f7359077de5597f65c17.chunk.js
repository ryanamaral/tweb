(this.webpackJsonp=this.webpackJsonp||[]).push([[19,26,27],{39:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(15),s=n(8),r=n(28),o=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{u(a.next(e))}catch(e){s(e)}}function o(e){try{u(a.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}u((a=a.apply(e,t||[])).next())}))};const u=new r.a("page-chats",!1,()=>(i.default.pushToState("authState",{_:"authStateSignedIn"}),Promise.resolve().then(n.bind(null,9)).then(e=>{e.default.broadcast("im_mount")}),s.default.requestedServerLanguage||s.default.getCacheLangPack().then(e=>{e.local&&s.default.getLangPack(e.lang_code)}),Object(a.c)(),new Promise(e=>{window.requestAnimationFrame(()=>{Promise.all([n.e(3),n.e(6),n.e(5),n.e(16)]).then(n.bind(null,76)).finally(()=>o(void 0,void 0,void 0,(function*(){e()})))})})));t.default=u},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(8);class i{constructor(e){this.element=document.body.querySelector("."+e.className),this.container=document.createElement("div"),this.container.className="container center-align",this.imageDiv=document.createElement("div"),this.imageDiv.className="auth-image",this.title=document.createElement("h4"),e.titleLangKey&&this.title.append(Object(a.i18n)(e.titleLangKey)),this.subtitle=document.createElement("p"),this.subtitle.className="subtitle",e.subtitleLangKey&&this.subtitle.append(Object(a.i18n)(e.subtitleLangKey)),this.container.append(this.imageDiv,this.title,this.subtitle),e.withInputWrapper&&(this.inputWrapper=document.createElement("div"),this.inputWrapper.className="input-wrapper",this.container.append(this.inputWrapper)),this.element.append(this.container)}}},69:function(e,t,n){"use strict";n.r(t);var a=n(16),i=n(23),s=n(15),r=n(54),o=n(28),u=n(39),l=n(14),c=n(65),d=n(71),p=n(13),h=n(8),m=n(57),b=n(7);let v;const g=new o.a("page-password",!0,()=>{const e=new m.a({className:"page-password",withInputWrapper:!0,titleLangKey:"Login.Password.Title",subtitleLangKey:"Login.Password.Subtitle"}),t=Object(l.a)("btn-primary btn-color-primary"),n=new h.default.IntlElement({key:"Login.Next"});t.append(n.element);const s=new c.a({label:"LoginPassword",name:"password"});let o;v=s.input,e.inputWrapper.append(s.container,t);let g,f=()=>(o||(o=window.setInterval(f,1e4)),r.a.getState().then(e=>{g=e,g.hint?Object(b.z)(s.label,Object(b.q)(p.b.wrapEmojiText(g.hint))):s.setLabel()}));const w=e=>{if(e&&Object(b.f)(e),!v.value.length)return void v.classList.add("error");const i=Object(b.B)([v,t],!0);let l=v.value;n.update({key:"PleaseWait"});const c=Object(a.f)(t);r.a.check(l,g).then(e=>{switch(e._){case"auth.authorization":clearInterval(o),u.default.mount(),E&&E.remove();break;default:t.removeAttribute("disabled"),n.update({key:e._}),c.remove()}}).catch(e=>{i(),s.input.classList.add("error"),e.type,n.update({key:"PASSWORD_HASH_INVALID"}),v.select(),c.remove(),f()})};Object(b.b)(t,w),v.addEventListener("keypress",(function(e){if(this.classList.remove("error"),n.update({key:"Login.Next"}),"Enter"===e.key)return w()}));const y=i.b.isMobile?100:166,E=new d.a(s,y);return e.imageDiv.append(E.container),Promise.all([E.load(),f()])},null,()=>{v.focus(),s.default.pushToState("authState",{_:"authStatePassword"})});t.default=g},80:function(e,t,n){"use strict";n.r(t);var a=n(23),i=n(15),s=n(12),r=n(28),o=n(39),u=n(69),l=n(72),c=n(85),d=n(86),p=n(87),h=n(7),m=n(8),b=n(36),v=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{u(a.next(e))}catch(e){s(e)}}function o(e){try{u(a.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}u((a=a.apply(e,t||[])).next())}))};let g,f=null,w=null,y=null;const E=new r.a("page-authCode",!0,()=>{const e=f.type.length,t=new p.a({label:"Code",name:Object(b.b)(),length:e,onFill:e=>{i(""+e)}});g=t.input,E.pageEl.querySelector(".input-wrapper").append(t.container);E.pageEl.querySelector(".phone-edit").addEventListener("click",(function(){return l.default.mount()}));const n=()=>{setTimeout(()=>{y.remove()},300)},i=e=>{g.setAttribute("disabled","true");const a={phone_number:f.phone_number,phone_code_hash:f.phone_code_hash,phone_code:e};s.a.invokeApi("auth.signIn",a,{ignoreErrors:!0}).then(e=>{switch(e._){case"auth.authorization":s.a.setUserAuth(e.user.id),o.default.mount(),n();break;case"auth.authorizationSignUpRequired":c.default.mount({phone_number:f.phone_number,phone_code_hash:f.phone_code_hash}),n()}}).catch(e=>v(void 0,void 0,void 0,(function*(){let n=!1;switch(e.type){case"SESSION_PASSWORD_NEEDED":n=!0,e.handled=!0,yield u.default.mount(),setTimeout(()=>{g.value=""},300);break;case"PHONE_CODE_EXPIRED":g.classList.add("error"),Object(h.z)(t.label,Object(m.i18n)("PHONE_CODE_EXPIRED"));break;case"PHONE_CODE_EMPTY":case"PHONE_CODE_INVALID":g.classList.add("error"),Object(h.z)(t.label,Object(m.i18n)("PHONE_CODE_INVALID"));break;default:t.label.innerText=e.type}n||t.select(),g.removeAttribute("disabled")})))},r=E.pageEl.querySelector(".auth-image"),w=a.b.isMobile?100:166,y=new d.a(t,w);return r.append(y.container),y.load()},e=>{if(f=e,w){g.value="";const e=document.createEvent("HTMLEvents");e.initEvent("input",!1,!0),g.dispatchEvent(e)}else w=E.pageEl.getElementsByClassName("phone")[0],y=E.pageEl.getElementsByClassName("sent-type")[0];let t,n;switch(w.innerText=f.phone_number,f.type._){case"auth.sentCodeTypeSms":t="Login.Code.SentSms";break;case"auth.sentCodeTypeApp":t="Login.Code.SentInApp";break;case"auth.sentCodeTypeCall":t="Login.Code.SentCall";break;default:t="Login.Code.SentUnknown",n=[f.type._]}Object(h.z)(y,Object(m.i18n)(t,n)),i.default.pushToState("authState",{_:"authStateAuthCode",sentCode:e})},()=>{g.focus()});t.default=E},85:function(e,t,n){"use strict";n.r(t);var a=n(14),i=n(20),s=n(16),r=n(78),o=n(7),u=n(15),l=n(8),c=n(12),d=n(13),p=n(57),h=n(28),m=n(39);let b=null;const v=new h.a("page-signUp",!0,()=>Promise.resolve().then(n.bind(null,51)).then(e=>{const t=new p.a({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});t.imageDiv.classList.add("avatar-edit"),t.title.classList.add("fullName");const n=document.createElement("canvas");n.id="canvas-avatar",n.className="avatar-edit-canvas";const u=document.createElement("span");u.className="tgico tgico-cameraadd",t.imageDiv.append(n,u);const h=e.default;let v;t.imageDiv.addEventListener("click",()=>{(new r.a).open(n,e=>{v=e})});const g=e=>{const n=f.value||"",a=w.value||"",i=n||a?(n+" "+a).trim():"";i?Object(o.z)(t.title,d.b.wrapEmojiText(i)):Object(o.z)(t.title,Object(l.i18n)("YourName"))};const f=new i.b({label:"FirstName",maxLength:70}),w=new i.b({label:"LastName",maxLength:64}),y=Object(a.a)("btn-primary btn-color-primary"),E=new l.default.IntlElement({key:"StartMessaging"});return y.append(E.element),t.inputWrapper.append(f.container,w.container,y),f.input.addEventListener("input",g),w.input.addEventListener("input",g),y.addEventListener("click",(function(e){if(f.input.classList.contains("error")||w.input.classList.contains("error"))return!1;if(!f.value.length)return f.input.classList.add("error"),!1;this.disabled=!0;const t=f.value.trim(),n=w.value.trim(),a={phone_number:b.phone_number,phone_code_hash:b.phone_code_hash,first_name:t,last_name:n};E.update({key:"PleaseWait"});const i=Object(s.f)(this);c.a.invokeApi("auth.signUp",a).then(e=>{switch(e._){case"auth.authorization":c.a.setUserAuth(e.user.id),new Promise((e,t)=>{if(!v)return e();v().then(n=>{h.uploadProfilePhoto(n).then(e,t)},t)}).finally(()=>{m.default.mount()});break;default:E.update({key:e._}),this.removeAttribute("disabled"),i.remove()}}).catch(e=>{this.removeAttribute("disabled"),i.remove(),e.type,E.update({key:e.type})})})),Object(o.c)(),new Promise(e=>{window.requestAnimationFrame(e)})}),e=>{b=e,u.default.pushToState("authState",{_:"authStateSignUp",authCode:e})});t.default=v}}]);
//# sourceMappingURL=19.f7359077de5597f65c17.chunk.js.map